<!--
Meta Description: # C++ 中的 sizeof 關鍵字：用法與範例 ## 簡介 `sizeof` 是 C++ 語言中用來獲取變量或數據類型所佔內存大小的運算符。它是一個編譯時運算符，通常用於確定數據類型的大小，以便於內存管理和數據結構的設計。 ## 文檔 ### 目的 `sizeof` 的主要目的是返回某個數據類型...
Meta Keywords: sizeof, std, int, cout, bytes
-->

# C++ 中的 sizeof 關鍵字：用法與範例

## 簡介
`sizeof` 是 C++ 語言中用來獲取變量或數據類型所佔內存大小的運算符。它是一個編譯時運算符，通常用於確定數據類型的大小，以便於內存管理和數據結構的設計。

## 文檔
### 目的
`sizeof` 的主要目的是返回某個數據類型或變量在內存中所佔的字節數。這對於高效的內存使用和性能優化至關重要。

### 使用方法
`sizeof` 可以用在兩種方式：
1. **數據類型**：例如 `sizeof(int)` 返回整數類型所佔的字節數。
2. **變量**：例如 `sizeof(variable)` 返回該變量所佔的字節數。

### 詳細說明
- `sizeof` 是一個運算符，而不是函數，因此不需要括號（除非用於類型）。
- 返回的大小是 `size_t` 類型，這是一個無符號整數類型，通常用於表示內存大小。
- 對於陣列，`sizeof` 返回整個陣列所佔的字節數，而不是單個元素的大小。
- 當應用於結構或聯合時，`sizeof` 會考慮內存對齊，可能會返回比預期更大的值。

## 範例
以下是一些 `sizeof` 的基本用法範例：

```cpp
#include <iostream>

int main() {
    int a;
    double b;
    char c;

    std::cout << "int 的大小: " << sizeof(int) << " bytes" << std::endl; // 輸出整數大小
    std::cout << "a 的大小: " << sizeof(a) << " bytes" << std::endl; // 輸出變量 a 的大小
    std::cout << "double 的大小: " << sizeof(b) << " bytes" << std::endl; // 輸出雙精度浮點數大小
    std::cout << "char 的大小: " << sizeof(c) << " bytes" << std::endl; // 輸出字符大小

    int arr[10];
    std::cout << "陣列的大小: " << sizeof(arr) << " bytes" << std::endl; // 輸出整個陣列的大小
    std::cout << "陣列元素的大小: " << sizeof(arr[0]) << " bytes" << std::endl; // 輸出單個陣列元素的大小

    return 0;
}
```

## 解釋
在使用 `sizeof` 時，有幾個常見的陷阱和注意事項：
- **對於動態分配的內存**：使用 `sizeof` 獲取指針的大小而不是它指向的內存大小。例如，`sizeof(ptr)` 只會返回指針本身的大小，而不是它所指向的數據大小。
- **結構對齊**：結構的大小可能會大於其成員大小的總和，這是因為編譯器可能會插入填充字節來滿足內存對齊要求。
- **不適用於不完整類型**：對於不完整的類型（如未完全定義的類），使用 `sizeof` 會導致編譯錯誤。

## 一行總結
`sizeof` 是 C++ 中用來獲取變量或數據類型在內存中所佔字節數的運算符。