<!--
Meta Description: # استخدام الكلمة المفتاحية "new" في لغة C++ ## ملخص تستخدم الكلمة المفتاحية "new" في لغة C++ لتخصيص الذاكرة ديناميكيًا، مما يسمح بإنشاء كائنات على hea...
Meta Keywords: الذاكرة, new, myclass, std, تخصيص
-->

# استخدام الكلمة المفتاحية "new" في لغة C++

## ملخص
تستخدم الكلمة المفتاحية "new" في لغة C++ لتخصيص الذاكرة ديناميكيًا، مما يسمح بإنشاء كائنات على heap (ذاكرة مؤقتة). تعتبر هذه الميزة أساسية لإدارة الذاكرة بشكل فعال في البرمجة الكائنية.

## الوثائق
### الغرض
تتيح الكلمة المفتاحية "new" في C++ للمبرمجين إنشاء كائنات أو مصفوفات ديناميكية في الذاكرة، مما يمكنهم من تعديل حجم البيانات أثناء وقت التشغيل.

### الاستخدام
لإنشاء كائن جديد باستخدام "new"، يتم استخدام الصيغة التالية:
```cpp
ClassName* objectName = new ClassName();
```
لإنشاء مصفوفة من الكائنات، يمكن استخدام الصيغة التالية:
```cpp
ClassName* arrayName = new ClassName[size];
```

### التفاصيل
- **الذاكرة الديناميكية**: يتم تخصيص الذاكرة عند الطلب، مما يعني أنه يمكن للمطورين تحديد كمية الذاكرة التي يحتاجونها.
- **إدارة الذاكرة**: يجب على المبرمجين استخدام الكلمة المفتاحية "delete" لتحرير الذاكرة المخصصة بواسطة "new" بعد الانتهاء من استخدامها، لتجنب تسرب الذاكرة.
- **الإستثناءات**: إذا فشل تخصيص الذاكرة (مثل عندما تكون الذاكرة غير كافية)، فإن "new" ستلقي استثناءً من نوع `std::bad_alloc`.

## الأمثلة
### مثال 1: تخصيص كائن بسيط
```cpp
#include <iostream>

class MyClass {
public:
    MyClass() {
        std::cout << "Constructor called!" << std::endl;
    }
    ~MyClass() {
        std::cout << "Destructor called!" << std::endl;
    }
};

int main() {
    MyClass* obj = new MyClass(); // إنشاء كائن
    delete obj; // تحرير الذاكرة
    return 0;
}
```

### مثال 2: تخصيص مصفوفة من الكائنات
```cpp
#include <iostream>

class MyClass {
public:
    MyClass() {
        std::cout << "Object created!" << std::endl;
    }
    ~MyClass() {
        std::cout << "Object destroyed!" << std::endl;
    }
};

int main() {
    const int size = 3;
    MyClass* array = new MyClass[size]; // إنشاء مصفوفة من الكائنات
    delete[] array; // تحرير الذاكرة
    return 0;
}
```

## الشرح
### المخاطر الشائعة
- **تسرب الذاكرة**: إذا نسيت تحرير الذاكرة باستخدام "delete" أو "delete[]"، فإن الذاكرة ستبقى محجوزة، مما يؤدي إلى تسرب الذاكرة.
- **الوصول إلى الذاكرة المحررة**: بعد استخدام "delete"، يجب تجنب الوصول إلى الكائن، لأنه يؤدي إلى سلوك غير متوقع.
- **الفشل في تخصيص الذاكرة**: عدم التعامل مع الاستثناءات عند تخصيص الذاكرة يمكن أن يؤدي إلى تعطل البرنامج في حالة عدم توفر الذاكرة.

## ملخص جملة واحدة
تستخدم الكلمة المفتاحية "new" في C++ لتخصيص الذاكرة ديناميكيًا للكائنات والمصفوفات، مما يسهل إدارة الذاكرة خلال وقت التشغيل.